<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Calendar Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../css/stylesheetcalendarmanager.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body translate="no" data-new-gr-c-s-check-loaded="14.1101.0" data-gr-ext-installed="">

<div class="mobile-header z-depth-1">

  <div class="row">
    <div class="col-2">
      <a href="#" data-activates="sidebar" class="button-collapse" style="">
        <i class="material-icons">menu</i>
      </a>
    </div>
    <div class="col">
      <h4>Events</h4>
    </div>
  </div>

</div>

<div class="main-wrapper">

  <div class="sidebar-wrapper z-depth-2 side-nav fixed" id="sidebar" style="transform: translateX(0%);">

    <div class="sidebar-title">
      <h4>Events</h4>
      <h5 id="eventDayName">March 23, 2023</h5>
    </div>
    <div class="sidebar-events" id="sidebarEvents">
      <div class="eventCard">
        <div class="eventCard-header">
        </div>
        <div class="eventCard-description"></div>
        <div class="eventCard-mark-wrapper">
          <div class="eventCard-mark"></div>
        </div>
      </div>

<!--      <div class="empty-message">Sorry, no events to selected date</div>-->
    </div>

  </div>

  <div class="content-wrapper orange darken-4">
    <div class="container">

      <div class="calendar-wrapper z-depth-2">

        <div class="header-background">
          <div class="calendar-header">

            <a class="prev-button" id="prev">
              <i class="material-icons">keyboard_arrow_left</i>
            </a>
            <a class="next-button" id="next">
              <i class="material-icons">keyboard_arrow_right</i>
            </a>

            <div class="row header-title">

              <div class="header-text">
                <h3 id="month-name">March 2023</h3>
                <h5 id="todayDayName">Today is Wednesday, Mar 22</h5>
              </div>

            </div>
          </div>
        </div>

        <div class="calendar-content">
          <div id="calendar-table" class="calendar-cells">

            <div id="table-header">
              <div class="row">
                <div class="col">Mon</div>
                <div class="col">Tue</div>
                <div class="col">Wed</div>
                <div class="col">Thu</div>
                <div class="col">Fri</div>
                <div class="col">Sat</div>
                <div class="col">Sun</div>
              </div>
            </div>

            <div id="table-body" class="animated fadeInRight"><div class="row"><div class="col empty-day"></div><div class="col empty-day"></div><div class="col">1</div><div class="col">2</div><div class="col">3</div><div class="col">4</div><div class="col">5</div></div><div class="row"><div class="col">6</div><div class="col">7</div><div class="col">8</div><div class="col">9</div><div class="col">10</div><div class="col">11</div><div class="col">12</div></div><div class="row"><div class="col">13</div><div class="col">14</div><div class="col">15</div><div class="col">16</div><div class="col">17</div><div class="col">18</div><div class="col">19</div></div><div class="row"><div class="col">20</div><div class="col">21</div><div class="col">22</div><div class="col blue lighten-3">23<div class="day-mark"></div></div><div class="col">24</div><div class="col">25</div><div class="col">26</div></div><div class="row"><div class="col">27</div><div class="col">28</div><div class="col">29</div><div class="col">30</div><div class="col">31</div><div class="col empty-day"></div><div class="col empty-day"></div></div></div>

          </div>
        </div>

        <div class="calendar-footer">
          <div class="emptyForm" id="emptyForm">
            <h4 id="emptyFormTitle">1 events now</h4>
            <a class="addEvent" id="changeFormButton">Add new</a>
          </div>
          <div class="addForm" id="addForm" style="top: 0px;">
            <h4>Add new event</h4>

            <div class="row">
              <div class="input-field col s6">
                <input id="eventTitleInput" type="text" class="validate valid">
                <label for="eventTitleInput" class="">Title</label>
              </div>
              <div class="input-field col s6">
                <input id="eventDescInput" type="text" class="validate valid">
                <label for="eventDescInput" class="">Description</label>
              </div>
            </div>

            <div class="addEventButtons">
              <a class="waves-effect waves-light btn blue lighten-2" id="addEventButton">Add</a>
              <a class="waves-effect waves-light btn blue lighten-2" id="cancelAdd">Cancel</a>
            </div>

          </div>
        </div>

      </div>

    </div>
  </div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
<script>
  $(".button-collapse").sideNav();
</script><div class="drag-target" data-sidenav="sidebar" style="left: 0px; touch-action: pan-y; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>


<script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd302503391ca806e7fcc7b9b87197aec26.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script id="rendered-js">
  var calendar = document.getElementById("calendar-table");
  var gridTable = document.getElementById("table-body");
  var currentDate = new Date();
  var selectedDate = currentDate;
  var selectedDayBlock = null;
  var globalEventObj = {};

  var sidebar = document.getElementById("sidebar");

  function createCalendar(date, side) {
    var currentDate = date;
    var startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);

    var monthTitle = document.getElementById("month-name");
    var monthName = currentDate.toLocaleString("en-US", {
      month: "long" });

    var yearNum = currentDate.toLocaleString("en-US", {
      year: "numeric" });

    monthTitle.innerHTML = `${monthName} ${yearNum}`;

    if (side == "left") {
      gridTable.className = "animated fadeOutRight";
    } else {
      gridTable.className = "animated fadeOutLeft";
    }

    setTimeout(() => {
      gridTable.innerHTML = "";

      var newTr = document.createElement("div");
      newTr.className = "row";
      var currentTr = gridTable.appendChild(newTr);

      for (let i = 1; i < (startDate.getDay() || 7); i++) {if (window.CP.shouldStopExecution(0)) break;
        let emptyDivCol = document.createElement("div");
        emptyDivCol.className = "col empty-day";
        currentTr.appendChild(emptyDivCol);
      }window.CP.exitedLoop(0);

      var lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
      lastDay = lastDay.getDate();

      for (let i = 1; i <= lastDay; i++) {if (window.CP.shouldStopExecution(1)) break;
        if (currentTr.children.length >= 7) {
          currentTr = gridTable.appendChild(addNewRow());
        }
        let currentDay = document.createElement("div");
        currentDay.className = "col";
        if (selectedDayBlock == null && i == currentDate.getDate() || selectedDate.toDateString() == new Date(currentDate.getFullYear(), currentDate.getMonth(), i).toDateString()) {
          selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), i);

          document.getElementById("eventDayName").innerHTML = selectedDate.toLocaleString("en-US", {
            month: "long",
            day: "numeric",
            year: "numeric" });


          selectedDayBlock = currentDay;
          setTimeout(() => {
            currentDay.classList.add("blue");
            currentDay.classList.add("lighten-3");
          }, 900);
        }
        currentDay.innerHTML = i;

        //show marks
        if (globalEventObj[new Date(currentDate.getFullYear(), currentDate.getMonth(), i).toDateString()]) {
          let eventMark = document.createElement("div");
          eventMark.className = "day-mark";
          currentDay.appendChild(eventMark);
        }

        currentTr.appendChild(currentDay);
      }window.CP.exitedLoop(1);

      for (let i = currentTr.getElementsByTagName("div").length; i < 7; i++) {if (window.CP.shouldStopExecution(2)) break;
        let emptyDivCol = document.createElement("div");
        emptyDivCol.className = "col empty-day";
        currentTr.appendChild(emptyDivCol);
      }window.CP.exitedLoop(2);

      if (side == "left") {
        gridTable.className = "animated fadeInLeft";
      } else {
        gridTable.className = "animated fadeInRight";
      }

      function addNewRow() {
        let node = document.createElement("div");
        node.className = "row";
        return node;
      }

    }, !side ? 0 : 270);
  }

  createCalendar(currentDate);

  var todayDayName = document.getElementById("todayDayName");
  todayDayName.innerHTML = "Today is " + currentDate.toLocaleString("en-US", {
    weekday: "long",
    day: "numeric",
    month: "short" });


  var prevButton = document.getElementById("prev");
  var nextButton = document.getElementById("next");

  prevButton.onclick = function changeMonthPrev() {
    currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1);
    createCalendar(currentDate, "left");
  };
  nextButton.onclick = function changeMonthNext() {
    currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1);
    createCalendar(currentDate, "right");
  };

  function addEvent(title, desc) {
    if (!globalEventObj[selectedDate.toDateString()]) {
      globalEventObj[selectedDate.toDateString()] = {};
    }
    globalEventObj[selectedDate.toDateString()][title] = desc;
  }

  function showEvents() {
    let sidebarEvents = document.getElementById("sidebarEvents");
    let objWithDate = globalEventObj[selectedDate.toDateString()];

    sidebarEvents.innerHTML = "";

    if (objWithDate) {
      let eventsCount = 0;
      for (key in globalEventObj[selectedDate.toDateString()]) {
        let eventContainer = document.createElement("div");
        eventContainer.className = "eventCard";

        let eventHeader = document.createElement("div");
        eventHeader.className = "eventCard-header";

        let eventDescription = document.createElement("div");
        eventDescription.className = "eventCard-description";

        eventHeader.appendChild(document.createTextNode(key));
        eventContainer.appendChild(eventHeader);

        eventDescription.appendChild(document.createTextNode(objWithDate[key]));
        eventContainer.appendChild(eventDescription);

        let markWrapper = document.createElement("div");
        markWrapper.className = "eventCard-mark-wrapper";
        let mark = document.createElement("div");
        mark.classList = "eventCard-mark";
        markWrapper.appendChild(mark);
        eventContainer.appendChild(markWrapper);

        sidebarEvents.appendChild(eventContainer);

        eventsCount++;
      }
      let emptyFormMessage = document.getElementById("emptyFormTitle");
      emptyFormMessage.innerHTML = `${eventsCount} events now`;
    } else {
      let emptyMessage = document.createElement("div");
      emptyMessage.className = "empty-message";
      emptyMessage.innerHTML = "Sorry, no events to selected date";
      sidebarEvents.appendChild(emptyMessage);
      let emptyFormMessage = document.getElementById("emptyFormTitle");
      emptyFormMessage.innerHTML = "No events now";
    }
  }

  gridTable.onclick = function (e) {

    if (!e.target.classList.contains("col") || e.target.classList.contains("empty-day")) {
      return;
    }

    if (selectedDayBlock) {
      if (selectedDayBlock.classList.contains("blue") && selectedDayBlock.classList.contains("lighten-3")) {
        selectedDayBlock.classList.remove("blue");
        selectedDayBlock.classList.remove("lighten-3");
      }
    }
    selectedDayBlock = e.target;
    selectedDayBlock.classList.add("blue");
    selectedDayBlock.classList.add("lighten-3");

    selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), parseInt(e.target.innerHTML));

    showEvents();

    document.getElementById("eventDayName").innerHTML = selectedDate.toLocaleString("en-US", {
      month: "long",
      day: "numeric",
      year: "numeric" });


  };

  var changeFormButton = document.getElementById("changeFormButton");
  var addForm = document.getElementById("addForm");
  changeFormButton.onclick = function (e) {
    addForm.style.top = 0;
  };

  var cancelAdd = document.getElementById("cancelAdd");
  cancelAdd.onclick = function (e) {
    addForm.style.top = "100%";
    let inputs = addForm.getElementsByTagName("input");
    for (let i = 0; i < inputs.length; i++) {if (window.CP.shouldStopExecution(3)) break;
      inputs[i].value = "";
    }window.CP.exitedLoop(3);
    let labels = addForm.getElementsByTagName("label");
    for (let i = 0; i < labels.length; i++) {if (window.CP.shouldStopExecution(4)) break;
      labels[i].className = "";
    }window.CP.exitedLoop(4);
  };

  var addEventButton = document.getElementById("addEventButton");
  addEventButton.onclick = function (e) {
    let title = document.getElementById("eventTitleInput").value.trim();
    let desc = document.getElementById("eventDescInput").value.trim();

    if (!title || !desc) {
      document.getElementById("eventTitleInput").value = "";
      document.getElementById("eventDescInput").value = "";
      let labels = addForm.getElementsByTagName("label");
      for (let i = 0; i < labels.length; i++) {if (window.CP.shouldStopExecution(5)) break;
        labels[i].className = "";
      }window.CP.exitedLoop(5);
      return;
    }

    addEvent(title, desc);
    showEvents();

    if (!selectedDayBlock.querySelector(".day-mark")) {
      selectedDayBlock.appendChild(document.createElement("div")).className = "day-mark";
    }

    let inputs = addForm.getElementsByTagName("input");
    for (let i = 0; i < inputs.length; i++) {if (window.CP.shouldStopExecution(6)) break;
      inputs[i].value = "";
    }window.CP.exitedLoop(6);
    let labels = addForm.getElementsByTagName("label");
    for (let i = 0; i < labels.length; i++) {if (window.CP.shouldStopExecution(7)) break;
      labels[i].className = "";
    }window.CP.exitedLoop(7);

  };
  //# sourceURL=pen.js
</script>

<div class="hiddendiv common"></div>
<script>showEvents()</script>
</body>
</html>